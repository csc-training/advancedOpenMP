* First experiment: 4 threads with 4 places; each place is 7 cores
  ----------------

     export OMP_NUM_THREADS=6
     export OMP_PLACES='{0,1,2,3,4,5,6},{7,8,9,10,11,12,13},{14,15,16,17,18,19,20},{21,22,23,24,25,26,27}'
     export OMP_PROC_BIND=spread                  
                                             
                                         These are core numbers.
                                         They are also called proc-ids.
                                           |
                                           v
            '{0,1,2,3,4,5,6},{7,8,9,10,11,12,13},...,{21,22,23,24,25,26,27}'
             ^             ^
              1st place.
              Threads id 0 can run on either core 0, 1, 2, 3, 4, 5 or 6.

             This list could have been generated by interal notaion:
             export OMP_PLACES='{0,1,2,3,4,5,6}:4:7'
                                (makes 4  places, with stride 7:
                                 take each value in the base add 4, { 7, 8, 9,10,11,12,13}
                                 take each value in the base add 4, {14,15,16,17,18,19,20}
                                 take each value in the base add 4, {21,22,23,24,25,26,27}
                                )

               
     amask_omp    # since Hyperthreading is not on the -vk (kernel view is the default)

   1a.) How many cores can each thread float on?  ____   7

thrd |    0    |   10    |   20    |
0000 0123456---------------------
0001 -------7890123--------------
0002 --------------4567890-------
0003 ---------------------1234567

   1b.) If you wanted to use just 2 places with even cores 
        (the first 7 even cores in one place, and the second set of
         of even cores in the second place) how would
        you write the expression in interval notation?     ___________________ {0:7:2}:2:14


       export OMP_NUM_THREADS=2
       export OMP_PLACES='{0,2,4,6,8,10,12}:2:14'
OR
       export OMP_PLACES='{0:7:2}:2:14'
       amask_omp
   

   1c.) What is the pattern?
thrd |    0    |   10    |   20    |
0000 0-2-4-6-8-0-2---------------
0001 --------------4-6-8-0-2-4-6-



* Second experiment: increase to 8 threads
  -----------------
export OMP_NUM_THREADS=8

amask_omp 

   2a.) Are the places "oversubscribed".  YES
   2b.) How are the additional 4 threads assigned?
thrd |    0    |   10    |   20    |
0000 0123456---------------------
0001 0123456---------------------
0002 -------7890123--------------
0003 -------7890123--------------
0004 --------------4567890-------
0005 --------------4567890-------
0006 ---------------------1234567
0007 ---------------------1234567


* Fourth experiment:  explore OMP_DISPLAY_ENV
  -----------------
export OMP_NUM_THREADS=4
export OMP_DISPLAY_ENV=TRUE
amask_omp 

   4a.) What does DISPLAY_ENV do?
   4b.) Set places to something incorrect, and run again e.g.

      e.g. use this incorrect syntax (forgot to separate with commas):
     export OMP_PLACES='{0,1,2,3,4,5,6}{7,8,9,10,11,12,13}{14,15,16,17,18,19,20}{21,22,23,24,25,26,27}'

It default to OMP_PROC_BIND=FALSE  (OpenMP affinity is turned off)
